// CommonTasks YAML Reference: ExchangeDagProvisioning
// ===================================================

:YmlCategory: ExchangeDagProvisioning

:abstract:    {YmlCategory} provisions Exchange Database Availability Groups (DAGs) including DAG members and network configuration.

[#dscyml_exchangedagprovisioning]
= DSC Resource '{YmlCategory}'

[[dscyml_exchangedagprovisioning_abstract, {abstract}]]
{abstract}

.When to use '{YmlCategory}'
****
Use this resource when you need to create and configure an Exchange DAG for high availability. It sets up the DAG, adds member servers, and configures DAG networks. A DAG provides automatic database-level failover when a server, database, or network failure occurs.
****


[cols="1,3a" options="autowidth" caption=]
|===
| Source         | https://github.com/dsccommunity/CommonTasks/tree/main/source/DSCResources/ExchangeDagProvisioning
| DSC Resource   | https://github.com/dsccommunity/ExchangeDsc[ExchangeDsc]
| Documentation  |
|===


.Attributes of category '{YmlCategory}'
[cols="1,1,1,2a,1a" options="header"]
|===
| Parameter
| Attribute
| DataType
| Description
| Allowed Values

| ShellCreds
| Mandatory
| PSCredential
| Exchange Management Shell credentials
|

| DagName
| Mandatory
| String
| Name of the Database Availability Group
|

| AutoDagTotalNumberOfServers
| Mandatory
| Int
| Total number of servers in the DAG
|

| AutoDagDatabaseCopiesPerVolume
| Mandatory
| Int
| Number of database copies per volume
|

| AutoDagDatabasesRootFolderPath
| Mandatory
| String
| Root folder path for databases
|

| AutoDagVolumesRootFolderPath
| Mandatory
| String
| Root folder path for volumes
|

| DatacenterActivationMode
| Mandatory
| String
| The datacenter activation mode
| - Off
  - DagOnly

| WitnessServer
| Mandatory
| String
| The witness server for the DAG
|

| WitnessDirectory
| Mandatory
| String
| The witness directory path
|

| ReplayLagManagerEnabled
|
| Boolean
| Whether Replay Lag Manager is enabled
|

| SkipDagValidation
|
| Boolean
| Whether to skip DAG validation
|

| FirstDagMemberName
| Mandatory
| String
| Name of the first DAG member server
|

|===


.Example
[source, yaml]
----
ExchangeDagProvisioning:
  ShellCreds: '[ENC=PE9ianMgVmVy...=]'
  DagName: DAG01
  AutoDagTotalNumberOfServers: 2
  AutoDagDatabaseCopiesPerVolume: 2
  AutoDagDatabasesRootFolderPath: C:\ExchangeDatabases
  AutoDagVolumesRootFolderPath: C:\ExchangeVolumes
  DatacenterActivationMode: DagOnly
  WitnessServer: Server01
  WitnessDirectory: C:\FSW
  ReplayLagManagerEnabled: true
  SkipDagValidation: true
  FirstDagMemberName: Exchange01
----
